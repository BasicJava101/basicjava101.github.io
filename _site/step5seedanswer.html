<!DOCTYPE HTML>
<!--
	Editorial by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>

<head>
  <title>Phoenix Basics</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <!--[if lte IE 8]><script src="/assets/js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" href="/assets/css/main.css" />
  <!--[if lte IE 9]><link rel="stylesheet" href="/assets/css/ie9.css" /><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" href="/assets/css/ie8.css" /><![endif]-->
</head>


<body>

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Main -->
        <div id="main">
            <div class="inner">
              <header id="header">
                <a href="http://localhost:9000/" class="logo">
                  <img src="/assets/images/conflogo.png">
                  <strong>Phoenix Basics</strong> 
                </a>
              </header>

                <!-- Content -->
                <section>
                	<header class="main">
                		<h1>Populate the database exercise answers</h1>
                	</header>

                  

                <h2 id="exercise-1-load-speakers">Exercise #1: Load speakers</h2>
<p>(Use git checkout <code class="highlighter-rouge">5b.load_speaker</code> to catch up with the class)</p>

<ol>
  <li>In the <code class="highlighter-rouge">lib/fawkes/schedule/schedule.ex</code>, find the function <code class="highlighter-rouge">list_profiles</code>. Change it to <code class="highlighter-rouge">list_speakers</code>.</li>
  <li>
    <p>Change the list speaker to preload talk</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   def list_speakers do
     Speaker
     |&gt; preload(:talk)
     |&gt; Repo.all()
   end
</code></pre></div>    </div>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">lib/fawkes_web/controllers/speaker_controllers.ex</code>, update the <code class="highlighter-rouge">index</code> function to reference speakers instead of profile. The code should look like this:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>     def index(conn, _params) do
       speakers = Schedule.list_speakers()
       render(conn, "index.html", speakers: speakers)
     end
</code></pre></div>    </div>
  </li>
  <li>
    <p>Letâ€™s update the layout. Open <code class="highlighter-rouge">lib/fawkes_web/templates/speaker/index.html.eex</code></p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   &lt;div class="container speaker-index"&gt;
     &lt;h4 class="subheader"&gt;Speakers&lt;/h4&gt;
     &lt;div class="row attendee"&gt;
       &lt;%= for speaker &lt;- @speakers do %&gt;
           &lt;div class="card col-xs-4"&gt;
             &lt;div class="card-body "&gt;
               &lt;img src="&lt;%= speaker.image_url %&gt;" class="rounded-circle"&gt;
               &lt;h4&gt;&lt;%= link FawkesWeb.SharedView.full_name(speaker), to: speaker_path(@conn, :show, speaker) %&gt;&lt;/h4&gt;
               &lt;p&gt;&lt;%= link speaker.talk.title, to: "/talks/#{speaker.talk.id}" %&gt;&lt;/p&gt;
             &lt;/div&gt;
           &lt;/div&gt;
       &lt;% end %&gt;
     &lt;/div&gt;
   &lt;/div&gt;
</code></pre></div>    </div>
  </li>
  <li>Go to <a href="http://localhost:4000/speakers">http://localhost:4000/speakers</a>, make sure the speaker loads</li>
</ol>

<h2 id="exercise-2-show-talk">Exercise #2: Show talk</h2>
<p>(Use git checkout <code class="highlighter-rouge">5c.show_talk</code> to catch up with the class)</p>

<ol>
  <li>
    <p>In <code class="highlighter-rouge">lib/fawkes/schedule/schedule.ex</code>, find the function <code class="highlighter-rouge">get_talk</code>. Preload slot, speakers, categories, audience, location</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   def get_talk!(id) do
     Talk
     |&gt; preload([:slot, :speakers, :categories, :audience, :location])
     |&gt; Repo.get!(id)
   end
</code></pre></div>    </div>
  </li>
  <li>
    <p>Open <code class="highlighter-rouge">lib/fawkes_web/templates/talk/show.html.eex</code>. Replace the content with this HTML:</p>
  </li>
</ol>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="container talk"&gt;
  &lt;div class="card section"&gt;
    &lt;p class="subtext"&gt;&lt;%= Timex.format!(@talk.slot.start_time, "%-I:%M %p", :strftime)%&gt; - &lt;%= Timex.format!(@talk.slot.end_time, "%-I:%M %p", :strftime) %&gt;&lt;/p&gt;
    &lt;h2&gt;&lt;%= @talk.title %&gt;&lt;/h2&gt;
    &lt;p class="smalltext"&gt;&lt;strong&gt;Location&lt;/strong&gt;: &lt;%= @talk.location.name %&gt;&lt;/p&gt;
    &lt;p class="icons"&gt;
      &lt;button class="btn talk__audience"&gt;&lt;%= @talk.audience.name %&gt;&lt;/button&gt;
      &lt;%= for category &lt;- @talk.categories do %&gt;
        &lt;%= if category.icon_url do %&gt;
          &lt;img src="&lt;%= category.icon_url %&gt;"&gt;
        &lt;% else %&gt;
        &lt;button class="btn talk__category"&gt;
          &lt;%= category.name %&gt;
        &lt;/button&gt;
        &lt;% end %&gt;

      &lt;% end %&gt;
    &lt;/p&gt;
    &lt;div class="add-to-schedule action"&gt;
      &lt;i class="far fa-calendar-check"&gt;&lt;/i&gt;
      ADD TO AGENDA
    &lt;/div&gt;
  &lt;/div&gt;

  &lt;hr/&gt;
  &lt;h4 class="subheader"&gt;Speakers/Trainers&lt;/h4&gt;
  &lt;%= for speaker &lt;- @talk.speakers do %&gt;
    &lt;div class="card speaker"&gt;
      &lt;div class="row card-body"&gt;
        &lt;div class="col-sm-3"&gt;
          &lt;img src="&lt;%= speaker.image_url %&gt;" class="rounded-circle"&gt;
        &lt;/div&gt;
        &lt;div class="col-sm-7 speaker__info"&gt;
          &lt;a href="/speakers/&lt;%= speaker.id %&gt;"&lt;h4&gt;&lt;%= FawkesWeb.SharedView.full_name(speaker) %&gt;&lt;/h4&gt;&lt;/a&gt;
          &lt;div class="speaker__handle"&gt;
            &lt;i class="fab fa-github"&gt;&lt;/i&gt; @&lt;%= speaker.github %&gt;
          &lt;/div&gt;
          &lt;div class="speaker__handle"&gt;
            &lt;i class="fab fa-twitter"&gt;&lt;/i&gt; @&lt;%= speaker.twitter %&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="col-sm-1 speaker__link"&gt;
          &lt;a href="/speakers/&lt;%= speaker.id%&gt;"&gt;&lt;i class="fas fa-chevron-right"&gt;&lt;/i&gt;&lt;/a&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;% end %&gt;
  &lt;hr /&gt;
  &lt;h4 class="subheader"&gt;About the event&lt;/h4&gt;
  &lt;p&gt;&lt;%= raw(@talk.description) %&gt;&lt;/p&gt;

  &lt;hr /&gt;
  &lt;h4 class="subheader"&gt;Checked in attendees&lt;/h4&gt;
  &lt;div class="row attendee"&gt;
    &lt;%= for _ &lt;- (1..10) do %&gt;
      &lt;div class="card col-sm-3"&gt;
        &lt;div class="card-body"&gt;
          &lt;img src="https://lh3.googleusercontent.com/-fEyw5rjNaN0/VIcChZfCYDI/AAAAAAAADfA/OW_u5voliss/w426-h351/good-job-job-lucky-star-konata-izumi-good-anime-otakus-1375040667.jpg" class="rounded-circle"&gt;
          &lt;i class="fas fa-check-circle attendee__check"&gt;&lt;/i&gt;
          &lt;h4&gt;Name name&lt;/h4&gt;
          &lt;div class="speaker__handle"&gt;
            &lt;i class="fab fa-github"&gt;&lt;/i&gt; @TODO-GIthubhandle
          &lt;/div&gt;
          &lt;div class="speaker__handle"&gt;
            &lt;i class="fab fa-twitter"&gt;&lt;/i&gt; @TODO-twitterhandle
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;% end %&gt;
  &lt;/div&gt;
&lt;/div&gt;
</code></pre></div></div>

<p>Go to <a href="http://localhost:4000/talks/1">http://localhost:4000/talks/1</a>
It should work.</p>


              </div>
          </div>

          <!-- Sidebar -->
  <div id="sidebar">
    <div class="inner">
      <!-- Menu -->
        <nav id="menu">
          <header class="major">
            <h2>Menu</h2>
          </header>
          <ul>
            <li><a href="index.html">0. Getting started</a></li>
            <li><a href="step1newapp.html">1. Create new project</a></li>
            <li><a href="step2addpage.html">2. Add a new page</a></li>
            <li><a href="step3addcategory.html">3. Add a feature</a></li>
            <li><a href="step3addcategoryanswer.html">3a. Add a feature answer</a></li>
            <li><a href="step4phoenixgenerator.html">4. Phoenix Generator</a></li>
            <li><a href="step5seed.html">5. Populate the database</a></li>
            <li><a href="step5seedanswer.html">5. Populate the database answer</a></li>
            <li><a href="step6usersignin.html">6. Add Member Signup</a></li>
            <li><a href="step7userprofiles.html">7. Add User Profiles</a></li>
            <li><a href="step8agenda.html">8. Add agenda</a></li>
            <li><a href="step9deploy.html">9. Deploy</a></li>
            <li><a href="step10bonus.html">10. Bonus exercise</a></li>
          </ul>
        </nav>

      <!-- Footer -->
        <footer id="footer">
          <p class="copyright">&copy; Phoenix Basics. All rights reserved. Demo Images: <a href="https://unsplash.com">Unsplash</a>. Design: <a href="https://html5up.net">HTML5 UP</a>. Jekyll integration: <a href="https://andrewbanchi.ch">Andrew Banchich</a>.</p>
        </footer>

    </div>
  </div>


      </div>

      <!-- Scripts -->
  <script src="http://localhost:9000/assets/js/jquery.min.js"></script>
  <script src="http://localhost:9000/assets/js/skel.min.js"></script>
  <script src="http://localhost:9000/assets/js/util.js"></script>
  <!--[if lte IE 8]><script src="http://localhost:9000/assets/js/ie/respond.min.js"></script><![endif]-->
  <script src="http://localhost:9000/assets/js/main.js"></script>


</body>

</html>
